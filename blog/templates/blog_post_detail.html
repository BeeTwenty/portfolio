{% extends 'base.html' %}
{% load static %}

{% block content %}
<section class="section">
    <div class="container">
        <h1 class="title">{{ post.title }}</h1>
        <div class="box">
            {{ post.content|safe }}
        </div>

        <div class="box">
            <h2 class="title is-4">Comments</h2>
            {% for comment in comments %}
                <article class="media">
                    <div class="media-content">
                        <div class="content">
                            <p>{{ comment.text }}<br>
                            <small>Posted by {{ comment.author }} on {{ comment.created_date }}</small></p>
                        </div>
                    </div>
                </article>
            {% empty %}
                <p>No comments yet.</p>
            {% endfor %}

            {% if user.is_authenticated %}
                <form method="post">
                    {% csrf_token %}
                    {{ comment_form.as_p }}
                    <button type="submit" name="comment" class="button is-link">Submit Comment</button>
                </form>
            {% endif %}
        </div>

        <form method="post">
            {% csrf_token %}
            {% if user.is_authenticated %}
                {% if is_liked %}
                    <button type="submit" name="like" class="button is-danger">Unlike</button>
                {% else %}
                    <button type="submit" name="like" class="button is-success">Like</button>
                {% endif %}
            {% endif %}
        </form>
    </div>
</section>
{% endblock %}
